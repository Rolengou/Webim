(this.webpackJsonpwebim=this.webpackJsonpwebim||[]).push([[0],{341:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t(15),r=t.n(s),i=t(6),o=t(71),l=t(185),c=t.n(l),d=t(392),m=t(198),u=t(192),j=t(39),p=t(391),b=t(68),h=t(45),f=t(84),x=t(58),g=t.n(x),O=t(21),v=t(402),w=t(7),k=Object(j.a)((function(e){return{container:{maxWidth:"500px",boxShadow:"0px 0px 8px 0px rgba(34, 60, 80, 0.2)"},typography:{marginTop:"10px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),marginBottom:"20px"},icon:{marginTop:"20px",backgroundColor:"green"},wrongCred:{display:"block",color:"red"}}})),N=h.a().shape({username:h.b().required("\u041f\u043e\u043b\u0435 \u041b\u043e\u0433\u0438\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),password:h.b().required("\u041f\u043e\u043b\u0435 \u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")}),y=function(){var e,a,t=k(),s=Object(b.b)({resolver:Object(f.a)(N),mode:"onBlur"}),r=s.register,l=s.handleSubmit,j=s.errors,h=Object(n.useState)(""),x=Object(i.a)(h,2),y=x[0],S=x[1],T=Object(n.useState)(""),C=Object(i.a)(T,2),W=C[0],I=C[1],q=Object(n.useState)(!1),_=Object(i.a)(q,2),D=_[0],R=_[1],A=Object(n.useState)(!1),z=Object(i.a)(A,2),F=z[0],L=z[1];return D||localStorage.getItem("token")?Object(w.jsx)(O.a,{to:"/users"}):Object(w.jsxs)(p.a,{className:t.container,component:"main",maxWidth:"xs",children:[Object(w.jsx)(d.a,{}),Object(w.jsxs)("div",{className:t.paper,children:[Object(w.jsx)(v.a,{className:t.icon,children:Object(w.jsx)(c.a,{})}),Object(w.jsx)(u.a,{className:t.typography,component:"h1",variant:"h5",children:"\u0412\u043e\u0439\u0442\u0438 \u0432 IT"}),Object(w.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:l((function(e,a){a.preventDefault(),g.a.post("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{username:y,password:W}).then((function(e){localStorage.setItem("token",e.data.token),200===e.request.status&&R(!0)})).catch((function(e){console.log(e.message),L(!0)}))})),children:[Object(w.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,inputRef:r,id:"username",label:"\u041b\u043e\u0433\u0438\u043d",name:"username",autoFocus:!0,onChange:function(e){S(e.target.value),console.log(y)},value:y,error:!!j.username,helperText:null===j||void 0===j||null===(e=j.username)||void 0===e?void 0:e.message,autoComplete:"username"}),Object(w.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,inputRef:r,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){I(e.target.value)},value:W,error:!!j.password,helperText:null===j||void 0===j||null===(a=j.password)||void 0===a?void 0:a.message}),Object(w.jsx)(o.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"\u0412\u0445\u043e\u0434"})]}),!0===F&&Object(w.jsx)("p",{className:t.wrongCred,children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},S=t(186),T=t(396),C=t(395),W=t(72),I=t(400),q=t(398),_=t(397),D=t(399),R=t(108),A=t.n(R),z=t(188),F=t.n(z),L=t(189),B=t.n(L),U=h.a().shape({username:h.b().required("Username is a required field").max(150).matches(/^[\w.@+-]+$/,"Username can contain numbers, letters or @/./+/-/_ only "),password:h.b().required("Password is a required field").max(128).matches(/^(?=.*[A-Z])(?=.*\d).{8,}$/,"Password must be at least 8 characters, including a number, an uppercase letter, and a lowercase letter"),firstname:h.b().required("Firstname is a required field").max(30),lastname:h.b().required("Lastname is a required field").max(150)}),P=Object(j.a)((function(e){return{tableContainer:{minWidth:"1000px",maxWidth:"1200px",margin:"0 auto",height:"800px"},menuButton:{marginRight:"0"},title:{flexGrow:1,marginLeft:"-20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cancel:{margin:e.spacing(3,0,2),marginTop:"0px"}}})),E=function(){var e,a,t,s,r,l,c,d,j=P(),p=Object(n.useState)([]),h=Object(i.a)(p,2),x=h[0],v=h[1],k=Object(n.useState)(!1),N=Object(i.a)(k,2),y=N[0],R=N[1],z=Object(n.useState)(!1),L=Object(i.a)(z,2),E=L[0],V=L[1],J=Object(n.useState)(!1),M=Object(i.a)(J,2),$=M[0],G=M[1],Z=Object(n.useState)(!1),H=Object(i.a)(Z,2),K=H[0],Q=H[1],X=Object(n.useState)(""),Y=Object(i.a)(X,2),ee=Y[0],ae=Y[1],te=Object(b.b)({resolver:Object(f.a)(U)}),ne=te.register,se=te.handleSubmit,re=te.errors,ie=Object(b.b)({resolver:Object(f.a)(U)}),oe=ie.register,le=ie.errors,ce=ie.handleSubmit,de="https://emphasoft-test-assignment.herokuapp.com",me=[{field:"id",headerName:"ID",flex:.6},{field:"username",headerName:"Username",flex:1},{field:"first_name",headerName:"Firstname",flex:1},{field:"last_name",headerName:"Lastname",flex:1},{field:"is_active",headerName:"Is active",flex:1},{field:"last_login",headerName:"Last login",flex:1},{field:"is_superuser",headerName:"Is superuser",flex:1},{field:"",renderCell:function(){return Object(w.jsxs)("strong",{children:[Object(w.jsx)(o.a,{align:"left",color:"primary",size:"small",onClick:pe,children:Object(w.jsx)(F.a,{})}),Object(w.jsx)(o.a,{align:"left",color:"primary",size:"small",onClick:je,children:Object(w.jsx)(B.a,{})})]})},flex:1}];Object(n.useEffect)((function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};g.a.get(de+"/api/v1/users/",e).then((function(e){v(e.data)}))}),[]);var ue=function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};g.a.get(de+"/api/v1/users/",e).then((function(e){v(e.data)}))},je=function(e){var a={headers:{Authorization:"Token "+localStorage.getItem("token")}};e.preventDefault(),g.a.delete(de+"/api/v1/users/"+"".concat(ee,"/"),a).then((function(){A()({title:"Are you sure&",buttons:[!0,"Delete"]}),ue()})).catch((function(e){console.log(e.message)}))},pe=function(){Q(!0)},be=function(){Q(!1)},he=function(e,a){var t={headers:{Authorization:"Token "+localStorage.getItem("token")}};a.preventDefault(),V(!0),g.a.post(de+"/api/v1/users/",{username:e.username,password:e.password,first_name:e.firstname,last_name:e.lastname,is_active:E},t).then((function(e){A()({icon:"success",title:"The user is created!"}),ue()})).then((function(){G(!1)})).catch((function(e){console.log(e.message)}))};return y?Object(w.jsx)(O.a,{to:"/"}):Object(w.jsxs)("div",{className:j.tableContainer,children:[Object(w.jsx)(T.a,{position:"static",children:Object(w.jsxs)(C.a,{children:[Object(w.jsx)(W.a,{edge:"start",className:j.menuButton,color:"inherit","aria-label":"menu"}),Object(w.jsx)(u.a,{variant:"h6",className:j.title,children:"Awesome Table!"}),Object(w.jsx)(o.a,{color:"inherit",onClick:function(){G(!0)},children:"+ Add user"}),Object(w.jsx)(o.a,{onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),R(!0)},color:"inherit",children:"Logout"})]})}),Object(w.jsxs)(I.a,{open:$,onClose:he,"aria-labelledby":"form-dialog-title",children:[Object(w.jsx)(_.a,{id:"form-dialog-title",children:"New user"}),Object(w.jsx)(q.a,{children:Object(w.jsxs)("form",{className:j.form,noValidate:!0,onSubmit:se(he),children:[Object(w.jsxs)(D.a,{container:!0,spacing:2,children:[Object(w.jsx)(D.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(m.a,{name:"firstname",variant:"outlined",fullWidth:!0,id:"firstname",label:"First Name",autoFocus:!0,inputRef:ne,error:!!re.firstname,helperText:null===re||void 0===re||null===(e=re.firstname)||void 0===e?void 0:e.message})}),Object(w.jsx)(D.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,id:"lastname",label:"Last Name",name:"lastname",inputRef:ne,error:!!re.lastname,helperText:null===re||void 0===re||null===(a=re.lastname)||void 0===a?void 0:a.message})}),Object(w.jsx)(D.a,{item:!0,xs:12,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,id:"username",label:"Username",name:"username",inputRef:ne,error:!!re.username,helperText:null===re||void 0===re||null===(t=re.username)||void 0===t?void 0:t.message})}),Object(w.jsx)(D.a,{item:!0,xs:12,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:ne,error:!!re.password,helperText:null===re||void 0===re||null===(s=re.password)||void 0===s?void 0:s.message})})]}),Object(w.jsx)(o.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:j.submit,children:"Add"}),Object(w.jsx)(o.a,{onClick:function(){G(!1)},color:"primary",variant:"contained",fullWidth:!0,className:j.cancel,children:"Cancel"})]})})]}),Object(w.jsx)(S.a,{rows:x,columns:me,pageSize:10,onSelectionModelChange:function(e){ae(e.selectionModel[0])}}),Object(w.jsxs)(I.a,{open:K,onClose:be,"aria-labelledby":"form-dialog-title",children:[Object(w.jsxs)(_.a,{id:"form-dialog-title",children:["Edit user with ID ",ee]}),Object(w.jsx)(q.a,{children:Object(w.jsxs)("form",{className:j.form,noValidate:!0,onSubmit:ce((function(e,a){var t={headers:{Authorization:"Token "+localStorage.getItem("token")}};a.preventDefault(),V(!0),g.a.patch(de+"/api/v1/users/"+"".concat(ee,"/"),{username:e.username,first_name:e.firstname,last_name:e.lastname,password:e.password,is_active:E},t).then((function(e){A()({icon:"success",title:"The user is updated!"}),ue()})).then((function(){Q(!1)})).catch((function(e){console.log(e.message)}))})),children:[Object(w.jsxs)(D.a,{container:!0,spacing:2,children:[Object(w.jsx)(D.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(m.a,{name:"firstname",variant:"outlined",fullWidth:!0,id:"firstname",label:"First Name",autoFocus:!0,inputRef:oe,error:!!le.firstname,helperText:null===le||void 0===le||null===(r=le.firstname)||void 0===r?void 0:r.message})}),Object(w.jsx)(D.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,id:"lastname",label:"Last Name",name:"lastname",inputRef:oe,error:!!le.lastname,helperText:null===le||void 0===le||null===(l=le.lastname)||void 0===l?void 0:l.message})}),Object(w.jsx)(D.a,{item:!0,xs:12,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,id:"username",label:"Username",name:"username",inputRef:oe,error:!!le.username,helperText:null===le||void 0===le||null===(c=le.username)||void 0===c?void 0:c.message})}),Object(w.jsx)(D.a,{item:!0,xs:12,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:oe,error:!!le.password,helperText:null===le||void 0===le||null===(d=le.password)||void 0===d?void 0:d.message})})]}),Object(w.jsx)(o.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:j.submit,children:"Done"}),Object(w.jsx)(o.a,{onClick:be,color:"primary",variant:"contained",fullWidth:!0,className:j.cancel,children:"Cancel"})]})})]})]})},V=t(97);var J=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(V.a,{children:Object(w.jsxs)(O.d,{children:[Object(w.jsx)(O.b,{exact:!0,path:"/",component:y}),Object(w.jsx)(O.b,{path:"/users",component:E})]})})})};r.a.render(Object(w.jsx)(J,{}),document.getElementById("root"))}},[[341,1,2]]]);
//# sourceMappingURL=main.cca1cdfc.chunk.js.map
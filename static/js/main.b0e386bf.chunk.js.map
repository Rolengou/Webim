{"version":3,"sources":["components/Form.js","components/Users.js","App.js","index.js"],"names":["useStyles","makeStyles","theme","container","maxWidth","boxShadow","typography","marginTop","paper","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","marginBottom","icon","wrongCred","color","schema","yup","shape","username","required","password","SignIn","classes","useForm","resolver","yupResolver","register","handleSubmit","errors","useState","setUsername","setPassword","redirect","setRedirect","wrong","setWrong","localStorage","getItem","to","Container","className","component","CssBaseline","Avatar","Typography","variant","noValidate","onSubmit","data","e","preventDefault","axios","post","baseUrl","then","res","setItem","token","request","status","catch","err","console","log","message","TextField","fullWidth","inputRef","id","label","name","autoFocus","onChange","target","value","error","helperText","autoComplete","type","Button","tableContainer","table","tableLayout","button","left","transform","idButton","paddingRight","idTableCell","padding","Users","setData","searchTerm","setSearchTerm","TableContainer","Paper","onClick","config","headers","Authorization","get","Table","size","aria-label","TableHead","TableRow","TableCell","dataCopy","sort","a","b","align","TableBody","filter","val","toLowerCase","includes","map","scope","removeItem","App","basename","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b0e386bf.chunk.js","sourcesContent":["import React, {useState} from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport LockIcon from '@material-ui/icons/Lock';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport {useForm} from \"react-hook-form\";\r\nimport * as yup from \"yup\";\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport axios from \"axios\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {Avatar} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        maxWidth: \"500px\",\r\n        boxShadow: '0px 0px 8px 0px rgba(34, 60, 80, 0.2)',\r\n    },\r\n    typography: {\r\n        marginTop: \"10px\"\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%',\r\n        marginTop: theme.spacing(1),\r\n\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n        marginBottom: \"20px\"\r\n    },\r\n    icon: {\r\n        marginTop: \"20px\",\r\n        backgroundColor: \"green\"\r\n    },\r\n    wrongCred: {\r\n        display: \"block\",\r\n        color: \"red\"\r\n    }\r\n}));\r\n\r\nconst schema = yup.object().shape({\r\n    username: yup\r\n        .string()\r\n        .required(\"Поле Логин обязательно для заполнения\"),\r\n    password: yup\r\n        .string()\r\n        .required(\"Поле Пароль обязательно для заполнения\")\r\n})\r\n\r\nexport const SignIn = () => {\r\n    const classes = useStyles();\r\n    const {register, handleSubmit, errors} = useForm({\r\n        resolver: yupResolver(schema)\r\n    })\r\n    const [username, setUsername] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [redirect, setRedirect] = useState(false)\r\n    const [wrong, setWrong] = useState(false)\r\n    const baseUrl = 'https://emphasoft-test-assignment.herokuapp.com'\r\n\r\n    const onChangeUsername = (e) => {\r\n        setUsername(e.target.value)\r\n    }\r\n\r\n    const onChangePassword = (e) => {\r\n        setPassword(e.target.value)\r\n    }\r\n\r\n    const onSubmit = (data, e) => {\r\n        e.preventDefault()\r\n        axios\r\n            .post(baseUrl + '/api-token-auth/', {username, password})\r\n            .then((res) => {\r\n                localStorage.setItem('token', res.data.token)\r\n\r\n                if (res.request.status === 200) {\r\n                    setRedirect(true)\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err.message)\r\n                setWrong(true)\r\n        })\r\n    }\r\n\r\n    if (redirect) {\r\n        return <Redirect to='/users' />\r\n    }\r\n\r\n    if (localStorage.getItem('token')) {\r\n        return <Redirect to='/users' />\r\n    }\r\n\r\n\r\n    return (\r\n        <Container className={classes.container} component=\"main\" maxWidth=\"xs\">\r\n            <CssBaseline/>\r\n            <div className={classes.paper}>\r\n                <Avatar className={classes.icon}>\r\n                    <LockIcon />\r\n                </Avatar>\r\n                <Typography className={classes.typography} component=\"h1\" variant=\"h5\">\r\n                    Войти в IT\r\n                </Typography>\r\n                <form className={classes.form} noValidate\r\n                      onSubmit={handleSubmit(onSubmit)}>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        inputRef={register}\r\n                        id=\"username\"\r\n                        label=\"Логин\"\r\n                        name=\"username\"\r\n                        autoFocus\r\n                        onChange={onChangeUsername}\r\n                        value={username}\r\n                        error={!!errors.username}\r\n                        helperText={errors?.username?.message}\r\n                        autoComplete=\"username\"\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        inputRef={register}\r\n                        name=\"password\"\r\n                        label=\"Пароль\"\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        autoComplete=\"current-password\"\r\n                        onChange={onChangePassword}\r\n                        value={password}\r\n                        error={!!errors.password}\r\n                        helperText={errors?.password?.message}\r\n                    />\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.submit}\r\n                    >Вход\r\n                    </Button>\r\n                </form>\r\n                {wrong === true &&\r\n                <p className={classes.wrongCred}>Неверный логин или пароль</p>}\r\n            </div>\r\n        </Container>\r\n    );\r\n}","import axios from \"axios\";\r\nimport React, {useState} from \"react\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {TextField} from \"@material-ui/core\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles({\r\n    tableContainer: {\r\n        maxWidth: \"500px\",\r\n        margin: \"0 auto\"\r\n    },\r\n    table: {\r\n        width: \"auto\",\r\n        tableLayout: \"auto\",\r\n        margin: \"0 auto\",\r\n        boxShadow: '0px 0px 8px 0px rgba(34, 60, 80, 0.2)',\r\n        marginBottom: \"30px\",\r\n\r\n    },\r\n    button: {\r\n        left: \"50%\",\r\n        transform: \"translateX(-50%)\",\r\n        margin: \"20px 0px\"\r\n    },\r\n    idButton: {\r\n        paddingRight: \"15px\"\r\n    },\r\n    idTableCell: {\r\n        padding: \"0\"\r\n    }\r\n});\r\n\r\nexport const Users = () => {\r\n    const classes = useStyles();\r\n    const [data, setData] = useState([])\r\n    const [searchTerm, setSearchTerm] = useState('')\r\n    const [redirect, setRedirect] = useState(false)\r\n    const baseUrl = 'https://emphasoft-test-assignment.herokuapp.com'\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        const config = {\r\n            headers: {\r\n                Authorization: 'Token ' + localStorage.getItem('token')\r\n            }\r\n        }\r\n        axios\r\n            .get(baseUrl + '/api/v1/users/', config)\r\n            .then((res) => {\r\n                setData(res.data)\r\n            })\r\n    }\r\n\r\n    const sortId = () => {\r\n        const dataCopy = [...data]\r\n        dataCopy.sort(function (a,b) {\r\n            return a.id - b.id\r\n        })\r\n        setData(dataCopy)\r\n    }\r\n\r\n    const onChange = (e) => {\r\n        setSearchTerm(e.target.value)\r\n        }\r\n\r\n    const handleExit = (e) => {\r\n        e.preventDefault()\r\n        localStorage.removeItem('token')\r\n        setRedirect(true)\r\n    }\r\n\r\n    if (redirect) {\r\n        return <Redirect to='/webim' />\r\n    }\r\n\r\n    return (\r\n        <TableContainer className={classes.tableContainer} component={Paper}>\r\n            <Button\r\n                className={classes.button}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleSubmit}>\r\n                Get users\r\n            </Button>\r\n            <Table\r\n                className={classes.table}\r\n                size=\"small\"\r\n                aria-label=\"a dense table\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell\r\n                            className={classes.idTableCell}\r\n                            onClick={sortId}>\r\n                            <Button className={classes.idButton}\r\n                                    color=\"primary\">ID</Button>\r\n                        </TableCell>\r\n                        <TableCell\r\n                            align=\"left\">\r\n                            <TextField onChange={onChange} id=\"outlined-basic\" label=\"Search by name...\" variant=\"outlined\" />\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {data.filter((val) => {\r\n                        if (searchTerm === '') {\r\n                        return val\r\n                    } else if (val.username.toLowerCase().includes(searchTerm.toLowerCase())) {\r\n                        return val\r\n                    }\r\n                    }).map((e) => (\r\n                        <TableRow key={e.id}>\r\n                            <TableCell component=\"th\" scope=\"row\">\r\n                                {e.id}\r\n                            </TableCell>\r\n                            <TableCell align=\"left\">{e.username}</TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n            <Link to='/'><Button\r\n                onClick={handleExit}\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n\r\n            >Выйти\r\n            </Button></Link>\r\n        </TableContainer>\r\n    );\r\n}\r\n","import {SignIn} from \"./components/Form\";\r\nimport {Users} from \"./components/Users\";\r\nimport {BrowserRouter, Route} from \"react-router-dom\";\r\n\r\n\r\nfunction App() {\r\n  return (\r\n      <div>\r\n          <BrowserRouter basename=\"/webim\">\r\n            <Route exact path='/' component={SignIn} />\r\n            <Route path='/users' component={Users} />\r\n          </BrowserRouter>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}
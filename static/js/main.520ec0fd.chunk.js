(this.webpackJsonpwebim=this.webpackJsonpwebim||[]).push([[0],{283:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(12),r=a.n(n),i=a(10),l=a(325),o=a(144),c=a.n(o),d=a(324),u=a(341),m=a(285),j=a(319),h=a(322),b=a(36),p=a(28),x=a(51),f=a(39),O=a.n(f),g=a(15),v=a(344),w=a(2),S=Object(j.a)((function(e){return{container:{maxWidth:"500px",boxShadow:"0px 0px 8px 0px rgba(34, 60, 80, 0.2)"},typography:{marginTop:"10px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),marginBottom:"20px"},icon:{marginTop:"20px",backgroundColor:"green"},wrongCred:{display:"block",color:"red"}}})),y=p.a().shape({username:p.b().required("\u041f\u043e\u043b\u0435 \u041b\u043e\u0433\u0438\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),password:p.b().required("\u041f\u043e\u043b\u0435 \u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")}),C=function(){var e,t,a=S(),n=Object(b.b)({resolver:Object(x.a)(y),mode:"onBlur"}),r=n.register,o=n.handleSubmit,j=n.errors,p=Object(s.useState)(""),f=Object(i.a)(p,2),C=f[0],k=f[1],D=Object(s.useState)(""),T=Object(i.a)(D,2),N=T[0],R=T[1],I=Object(s.useState)(!1),W=Object(i.a)(I,2),_=W[0],A=W[1],E=Object(s.useState)(!1),L=Object(i.a)(E,2),q=L[0],U=L[1];return _||localStorage.getItem("token")?Object(w.jsx)(g.a,{to:"/users"}):Object(w.jsxs)(h.a,{className:a.container,component:"main",maxWidth:"xs",children:[Object(w.jsx)(d.a,{}),Object(w.jsxs)("div",{className:a.paper,children:[Object(w.jsx)(v.a,{className:a.icon,children:Object(w.jsx)(c.a,{})}),Object(w.jsx)(m.a,{className:a.typography,component:"h1",variant:"h5",children:"\u0412\u043e\u0439\u0442\u0438 \u0432 IT"}),Object(w.jsxs)("form",{className:a.form,noValidate:!0,onSubmit:o((function(e,t){t.preventDefault(),O.a.post("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{username:C,password:N}).then((function(e){localStorage.setItem("token",e.data.token),200===e.request.status&&A(!0)})).catch((function(e){console.log(e.message),U(!0)}))})),children:[Object(w.jsx)(u.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,inputRef:r,id:"username",label:"\u041b\u043e\u0433\u0438\u043d",name:"username",autoFocus:!0,onChange:function(e){k(e.target.value),console.log(C)},value:C,error:!!j.username,helperText:null===j||void 0===j||null===(e=j.username)||void 0===e?void 0:e.message,autoComplete:"username"}),Object(w.jsx)(u.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,inputRef:r,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){R(e.target.value)},value:N,error:!!j.password,helperText:null===j||void 0===j||null===(t=j.password)||void 0===t?void 0:t.message}),Object(w.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:"\u0412\u0445\u043e\u0434"})]}),!0===q&&Object(w.jsx)("p",{className:a.wrongCred,children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},k=a(74),D=a(8),T=a(81),N=a.n(T),R=a(145),I=a.n(R),W=a(146),_=a.n(W),A=a(326),E=a(327),L=a(328),q=a(286),U=a(345),z=function(e){return Object(w.jsx)(A.a,{position:"static",children:Object(w.jsxs)(E.a,{children:[Object(w.jsx)(L.a,{edge:"start",className:e.styles.menuButton,color:"inherit","aria-label":"menu"}),Object(w.jsx)(m.a,{variant:"h6",className:e.styles.title,children:"Awesome Table!"}),Object(w.jsx)(q.a,{component:"form",className:e.styles.root,children:Object(w.jsx)(U.a,{className:e.styles.input,placeholder:"Type username",inputProps:{"aria-label":"search here"},onChange:e.handleChangeSearch})}),Object(w.jsx)(l.a,{color:"inherit",onClick:e.handleClickOpen,children:"+ Add user"}),Object(w.jsx)(l.a,{color:"inherit",onClick:e.handleExit,children:"Logout"})]})})},F=a(329),V=a(330),B=a(331),P=a(332),J=a(333),M=a(346),$=a(334),G=a(335),Z=a(336),H=function(e){return Object(w.jsx)(F.a,{children:Object(w.jsxs)(V.a,{children:[Object(w.jsx)(B.a,{children:Object(w.jsxs)(P.a,{selected:!0,children:[Object(w.jsx)(J.a,{style:{width:"10%"},onClick:function(){e.fieldSortData("id")},children:Object(w.jsxs)(M.a,{hideSortIcon:!0,children:["ID","id"===e.fieldData?e.chooseArrow:null]})}),Object(w.jsx)(J.a,{style:{width:"15%"},onClick:function(){e.fieldSortData("username")},children:Object(w.jsxs)(M.a,{hideSortIcon:!0,children:["Username","username"===e.fieldData?e.chooseArrow:null]})}),Object(w.jsx)(J.a,{style:{width:"15%"},onClick:function(){e.fieldSortData("first_name")},children:Object(w.jsxs)(M.a,{hideSortIcon:!0,children:["Firstname","first_name"===e.fieldData?e.chooseArrow:null]})}),Object(w.jsx)(J.a,{style:{width:"15%"},onClick:function(){e.fieldSortData("last_name")},children:Object(w.jsxs)(M.a,{hideSortIcon:!0,children:["Lastname","last_name"===e.fieldData?e.chooseArrow:null]})}),Object(w.jsx)(J.a,{style:{width:"15%"},onClick:function(){e.fieldSortData("is_active")},children:Object(w.jsxs)(M.a,{hideSortIcon:!0,children:["Is active","is_active"===e.fieldData?e.chooseArrow:null]})}),Object(w.jsx)(J.a,{style:{width:"15%"},onClick:function(){e.fieldSortData("is_superuser")},children:Object(w.jsxs)(M.a,{hideSortIcon:!0,children:["Is superuser","is_superuser"===e.fieldData?e.chooseArrow:null]})}),Object(w.jsx)(J.a,{children:"Actions"})]})}),Object(w.jsx)($.a,{children:e.data.filter((function(t){return""===e.searchTerm||t.username.toLowerCase().includes(e.searchTerm.toLowerCase())?t:void 0})).map((function(t){return Object(w.jsxs)(P.a,{onClick:function(){e.setSelectedRow(t.id),e.setSelectedRowData(t)},children:[Object(w.jsx)(J.a,{children:t.id}),Object(w.jsx)(J.a,{children:t.username}),Object(w.jsx)(J.a,{children:t.first_name}),Object(w.jsx)(J.a,{children:t.last_name}),Object(w.jsx)(J.a,{children:t.is_active+""}),Object(w.jsx)(J.a,{children:t.is_superuser+""}),Object(w.jsxs)(J.a,{children:[Object(w.jsx)(l.a,{style:{maxWidth:"30px",minWidth:"30px"},size:"small",children:Object(w.jsx)(G.a,{color:"primary",onClick:e.handleClickOpenEdit,className:e.styles.iconEdit})}),Object(w.jsx)(l.a,{style:{maxWidth:"30px",minWidth:"30px"},size:"small",children:Object(w.jsx)(Z.a,{onClick:e.handleOpenDelete,className:e.styles.iconDelete})})]})]},t.id)}))})]})})},K=a(343),Q=a(337),X=a(338),Y=a(339),ee=function(e){var t,a,s,n,r=Object(b.b)({resolver:Object(x.a)(e.schema)}),i=r.register,o=r.handleSubmit,c=r.errors;return Object(w.jsxs)(K.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(w.jsx)(Q.a,{id:"form-dialog-title",children:"New user"}),Object(w.jsxs)(X.a,{children:[Object(w.jsxs)("form",{className:e.styles.form,noValidate:!0,onSubmit:o(e.onSubmit),children:[Object(w.jsxs)(Y.a,{container:!0,spacing:2,children:[Object(w.jsx)(Y.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(u.a,{name:"firstname",variant:"outlined",fullWidth:!0,id:"firstname",label:"First Name",autoFocus:!0,inputRef:i,error:!!c.firstname,helperText:null===c||void 0===c||null===(t=c.firstname)||void 0===t?void 0:t.message})}),Object(w.jsx)(Y.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,id:"lastname",label:"Last Name",name:"lastname",inputRef:i,error:!!c.lastname,helperText:null===c||void 0===c||null===(a=c.lastname)||void 0===a?void 0:a.message})}),Object(w.jsx)(Y.a,{item:!0,xs:12,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,id:"username",label:"Username",name:"username",inputRef:i,error:!!c.username,helperText:null===c||void 0===c||null===(s=c.username)||void 0===s?void 0:s.message})}),Object(w.jsx)(Y.a,{item:!0,xs:12,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:i,error:!!c.password,helperText:null===c||void 0===c||null===(n=c.password)||void 0===n?void 0:n.message})})]}),Object(w.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.styles.submit,children:"Add"}),Object(w.jsx)(l.a,{onClick:e.handleClose,color:"primary",variant:"contained",fullWidth:!0,className:e.styles.cancel,children:"Cancel"})]}),!1!==e.errorUser&&Object(w.jsx)("p",{className:e.styles.userExist,children:"A user with that username already exists"})]})]})},te=function(e){var t,a,s,n,r=Object(b.b)({resolver:Object(x.a)(e.schema)}),i=r.register,o=r.errors,c=r.handleSubmit;return Object(w.jsxs)(K.a,{open:e.openEdit,onClose:e.handleCloseEdit,"aria-labelledby":"form-dialog-title",children:[Object(w.jsxs)(Q.a,{id:"form-dialog-title",children:["Edit user with ID ",e.selectedRow]}),Object(w.jsx)(X.a,{children:Object(w.jsxs)("form",{className:e.styles.form,noValidate:!0,onSubmit:c(e.onSubmitEdit),children:[Object(w.jsxs)(Y.a,{container:!0,spacing:2,children:[Object(w.jsx)(Y.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(u.a,{defaultValue:e.selectedRowData.first_name,name:"firstname",variant:"outlined",fullWidth:!0,id:"firstname",label:"First Name",autoFocus:!0,inputRef:i,error:!!o.firstname,helperText:null===o||void 0===o||null===(t=o.firstname)||void 0===t?void 0:t.message})}),Object(w.jsx)(Y.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,defaultValue:e.selectedRowData.last_name,id:"lastname",label:"Last Name",name:"lastname",inputRef:i,error:!!o.lastname,helperText:null===o||void 0===o||null===(a=o.lastname)||void 0===a?void 0:a.message})}),Object(w.jsx)(Y.a,{item:!0,xs:12,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,defaultValue:e.selectedRowData.username,id:"username",label:"Username",name:"username",inputRef:i,error:!!o.username,helperText:null===o||void 0===o||null===(s=o.username)||void 0===s?void 0:s.message})}),Object(w.jsx)(Y.a,{item:!0,xs:12,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:i,error:!!o.password,helperText:null===o||void 0===o||null===(n=o.password)||void 0===n?void 0:n.message})})]}),Object(w.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.styles.submit,children:"Done"}),Object(w.jsx)(l.a,{onClick:e.handleCloseEdit,color:"primary",variant:"contained",fullWidth:!0,className:e.styles.cancel,children:"Cancel"})]})})]})},ae=a(340),se=function(e){return Object(w.jsxs)(K.a,{open:e.openDelete,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(w.jsxs)(Q.a,{id:"alert-dialog-slide-title",children:["Delete ID ",e.selectedRow,"?"]}),Object(w.jsxs)(ae.a,{children:[Object(w.jsx)(l.a,{onClick:e.handleCloseDelete,color:"primary",variant:"contained",children:"Cancel"}),Object(w.jsx)(l.a,{onClick:e.handleDeleteUser,color:"primary",variant:"contained",children:"Delete"})]})]})},ne=Object(j.a)((function(e){return{app:{minWidth:"600px",maxWidth:"1000px",margin:"0 auto",height:"1000px",boxShadow:"0px 0px 8px 0px rgba(34, 60, 80, 0.2)"},form:{width:"100%",marginTop:e.spacing(3)},userExist:{display:"flex",color:"red",justifyContent:"center"},submit:{margin:e.spacing(3,0,2)},cancel:{margin:e.spacing(3,0,2),marginTop:"0px"},iconEdit:{cursor:"pointer"},iconDelete:{color:"red",cursor:"pointer"},arrow:{position:"absolute",marginLeft:"100%"},inputMaterial:{width:"100%"},menuButton:{marginRight:"0"},title:{flexGrow:1,marginLeft:"-20px"},root:{padding:"2px 4px",display:"flex",alignItems:"center",width:200,marginRight:10},input:{marginLeft:e.spacing(1),flex:1}}})),re=p.a().shape({username:p.b().required("Username is a required field").max(150).matches(/^[\w.@+-]+$/,"Username can contain numbers, letters or @/./+/-/_ only "),password:p.b().required("Password is a required field").max(128).matches(/^(?=.*[A-Z])(?=.*\d).{8,}$/,"Password must be at least 8 characters, including a number, an uppercase letter, and a lowercase letter"),firstname:p.b().required("Firstname is a required field").max(30),lastname:p.b().required("Lastname is a required field").max(150)}),ie=function(){var e=ne(),t=Object(s.useState)([]),a=Object(i.a)(t,2),n=a[0],r=a[1],l=Object(s.useState)(!1),o=Object(i.a)(l,2),c=o[0],d=o[1],u=Object(s.useState)(!1),m=Object(i.a)(u,2),j=m[0],h=m[1],b=Object(s.useState)(!1),p=Object(i.a)(b,2),x=p[0],f=p[1],v=Object(s.useState)(!1),S=Object(i.a)(v,2),y=S[0],C=S[1],k=Object(s.useState)(!0),T=Object(i.a)(k,2),R=T[0],W=T[1],A=Object(s.useState)(""),E=Object(i.a)(A,2),L=E[0],q=E[1],U=Object(s.useState)([]),F=Object(i.a)(U,2),V=F[0],B=F[1],P=Object(s.useState)(""),J=Object(i.a)(P,2),M=J[0],$=J[1],G=Object(s.useState)(!1),Z=Object(i.a)(G,2),K=Z[0],Q=Z[1],X=Object(s.useState)(""),Y=Object(i.a)(X,2),ae=Y[0],ie=Y[1],le=Object(s.useState)(!1),oe=Object(i.a)(le,2),ce=oe[0],de=oe[1],ue="https://emphasoft-test-assignment.herokuapp.com";Object(s.useEffect)((function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};O.a.get(ue+"/api/v1/users/",e).then((function(e){r(e.data)}))}),[]);var me=function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};O.a.get(ue+"/api/v1/users/",e).then((function(e){r(e.data)}))};return y?Object(w.jsx)(g.a,{to:"/"}):Object(w.jsxs)("div",{className:e.app,children:[Object(w.jsx)(z,{styles:e,handleExit:function(e){e.preventDefault(),localStorage.removeItem("token"),C(!0)},handleClickOpen:function(){d(!0)},handleChangeSearch:function(e){q(e.target.value)}}),Object(w.jsx)(H,{styles:e,chooseArrow:function(){return R?Object(w.jsx)(I.a,{className:e.arrow}):Object(w.jsx)(_.a,{className:e.arrow})},fieldSortData:function(e){!function(e){var t,a=Object(D.a)(n);R&&(t=a.sort((function(t,a){return t[e].toString().toLowerCase()>a[e].toString().toLowerCase()?1:-1}))),t=a.reverse((function(t,a){return t[e].toString().toLowerCase()>a[e].toString().toLowerCase()?1:-1})),r(t),W(!R)}(e),ie(e)},fieldData:ae,data:n,searchTerm:L,setSelectedRow:B,setSelectedRowData:$,handleClickOpenEdit:function(){h(!0)},handleOpenDelete:function(){Q(!0)}}),Object(w.jsx)(ee,{handleClose:function(){d(!1),de(!1)},styles:e,onSubmit:function(e,t){var a={headers:{Authorization:"Token "+localStorage.getItem("token")}};t.preventDefault(),f(!0),O.a.post(ue+"/api/v1/users/",{username:e.username,password:e.password,first_name:e.firstname,last_name:e.lastname,is_active:x},a).then((function(e){N()({icon:"success",title:"The user was created!"}),me()})).then((function(){d(!1)})).catch((function(e){console.log(e.response.data.username[0]),de(e.response.data.username[0])}))},schema:re,open:c,errorUser:ce}),Object(w.jsx)(te,{styles:e,openEdit:j,handleCloseEdit:function(){h(!1)},selectedRow:V,schema:re,onSubmitEdit:function(e,t){var a={headers:{Authorization:"Token "+localStorage.getItem("token")}};t.preventDefault(),f(!0),O.a.patch(ue+"/api/v1/users/"+"".concat(V,"/"),{username:e.username,first_name:e.firstname,last_name:e.lastname,password:e.password,is_active:x},a).then((function(e){N()({icon:"success",title:"The user is updated!"}),ie(""),me()})).then((function(){h(!1)})).catch((function(e){console.log(e.message)}))},selectedRowData:M}),Object(w.jsx)(se,{openDelete:K,selectedRow:V,handleCloseDelete:function(){Q(!1)},handleDeleteUser:function(e){var t={headers:{Authorization:"Token "+localStorage.getItem("token")}};e.preventDefault(),O.a.delete(ue+"/api/v1/users/"+"".concat(V,"/"),t).then((function(e){Q(!1),N()({icon:"success",title:"The user is deleted!"}),ie(""),me()})).catch((function(e){console.log(e.message)}))}})]})};var le=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(k.a,{children:Object(w.jsxs)(g.d,{children:[Object(w.jsx)(g.b,{exact:!0,path:"/",component:C}),Object(w.jsx)(g.b,{path:"/users",component:ie})]})})})};r.a.render(Object(w.jsx)(le,{}),document.getElementById("root"))}},[[283,1,2]]]);
//# sourceMappingURL=main.520ec0fd.chunk.js.map
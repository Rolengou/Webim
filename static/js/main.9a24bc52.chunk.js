(this.webpackJsonpwebim=this.webpackJsonpwebim||[]).push([[0],{340:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t(15),r=t.n(s),i=t(6),l=t(71),o=t(185),c=t.n(o),d=t(391),m=t(197),u=t(191),j=t(39),p=t(390),b=t(67),h=t(45),f=t(84),x=t(68),g=t.n(x),O=t(21),v=t(401),w=t(7),N=Object(j.a)((function(e){return{container:{maxWidth:"500px",boxShadow:"0px 0px 8px 0px rgba(34, 60, 80, 0.2)"},typography:{marginTop:"10px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),marginBottom:"20px"},icon:{marginTop:"20px",backgroundColor:"green"},wrongCred:{display:"block",color:"red"}}})),k=h.a().shape({username:h.b().required("\u041f\u043e\u043b\u0435 \u041b\u043e\u0433\u0438\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),password:h.b().required("\u041f\u043e\u043b\u0435 \u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")}),S=function(){var e,a,t=N(),s=Object(b.b)({resolver:Object(f.a)(k),mode:"onBlur"}),r=s.register,o=s.handleSubmit,j=s.errors,h=Object(n.useState)(""),x=Object(i.a)(h,2),S=x[0],y=x[1],T=Object(n.useState)(""),C=Object(i.a)(T,2),W=C[0],I=C[1],q=Object(n.useState)(!1),_=Object(i.a)(q,2),R=_[0],D=_[1],A=Object(n.useState)(!1),F=Object(i.a)(A,2),L=F[0],z=F[1];return R||localStorage.getItem("token")?Object(w.jsx)(O.a,{to:"/users"}):Object(w.jsxs)(p.a,{className:t.container,component:"main",maxWidth:"xs",children:[Object(w.jsx)(d.a,{}),Object(w.jsxs)("div",{className:t.paper,children:[Object(w.jsx)(v.a,{className:t.icon,children:Object(w.jsx)(c.a,{})}),Object(w.jsx)(u.a,{className:t.typography,component:"h1",variant:"h5",children:"\u0412\u043e\u0439\u0442\u0438 \u0432 IT"}),Object(w.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:o((function(e,a){a.preventDefault(),g.a.post("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{username:S,password:W}).then((function(e){localStorage.setItem("token",e.data.token),200===e.request.status&&D(!0)})).catch((function(e){console.log(e.message),z(!0)}))})),children:[Object(w.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,inputRef:r,id:"username",label:"\u041b\u043e\u0433\u0438\u043d",name:"username",autoFocus:!0,onChange:function(e){y(e.target.value),console.log(S)},value:S,error:!!j.username,helperText:null===j||void 0===j||null===(e=j.username)||void 0===e?void 0:e.message,autoComplete:"username"}),Object(w.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,inputRef:r,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){I(e.target.value)},value:W,error:!!j.password,helperText:null===j||void 0===j||null===(a=j.password)||void 0===a?void 0:a.message}),Object(w.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"\u0412\u0445\u043e\u0434"})]}),!0===L&&Object(w.jsx)("p",{className:t.wrongCred,children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},y=t(186),T=t(395),C=t(394),W=t(72),I=t(399),q=t(397),_=t(396),R=t(398),D=t(123),A=t.n(D),F=t(188),L=t.n(F),z=h.a().shape({username:h.b().required("Username is a required field").max(150).matches(/^[\w.@+-]+$/,"Username can contain numbers, letters or @/./+/-/_ only "),password:h.b().required("Password is a required field").max(128).matches(/^(?=.*[A-Z])(?=.*\d).{8,}$/,"Password must be at least 8 characters, including a number, an uppercase letter, and a lowercase letter"),firstname:h.b().required("Firstname is a required field").max(30),lastname:h.b().required("Lastname is a required field").max(150)}),B=Object(j.a)((function(e){return{tableContainer:{maxWidth:"1200px",margin:"0 auto",height:"800px"},menuButton:{marginRight:"0"},title:{flexGrow:1,marginLeft:"-20px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cancel:{margin:e.spacing(3,0,2),marginTop:"0px"}}})),U=function(){var e,a,t,s,r,o,c,d,j=B(),p=Object(n.useState)([]),h=Object(i.a)(p,2),x=h[0],v=h[1],N=Object(n.useState)(!1),k=Object(i.a)(N,2),S=k[0],D=k[1],F=Object(n.useState)(!1),U=Object(i.a)(F,2),P=U[0],E=U[1],V=Object(n.useState)(!1),J=Object(i.a)(V,2),M=J[0],$=J[1],G=Object(n.useState)(!1),Z=Object(i.a)(G,2),H=Z[0],K=Z[1],Q=Object(n.useState)(""),X=Object(i.a)(Q,2),Y=X[0],ee=X[1],ae=Object(b.b)({resolver:Object(f.a)(z)}),te=ae.register,ne=ae.handleSubmit,se=ae.errors,re=Object(b.b)({resolver:Object(f.a)(z)}),ie=re.register,le=re.errors,oe=re.handleSubmit,ce="https://emphasoft-test-assignment.herokuapp.com";Object(n.useEffect)((function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};g.a.get(ce+"/api/v1/users/",e).then((function(e){v(e.data)}))}),[]);var de=function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};g.a.get(ce+"/api/v1/users/",e).then((function(e){v(e.data)}))},me=function(){K(!0)},ue=function(){K(!1)},je=function(e,a){var t={headers:{Authorization:"Token "+localStorage.getItem("token")}};a.preventDefault(),E(!0),g.a.post(ce+"/api/v1/users/",{username:e.username,password:e.password,first_name:e.firstname,last_name:e.lastname,is_active:P},t).then((function(e){A()({icon:"success",title:"The user is created!"}),de()})).then((function(){$(!1)})).catch((function(e){console.log(e.message)}))};if(S)return Object(w.jsx)(O.a,{to:"/"});var pe=[{field:"id",headerName:"ID",flex:.5},{field:"username",headerName:"Username",flex:1},{field:"first_name",headerName:"Firstname",flex:1},{field:"last_name",headerName:"Lastname",flex:1},{field:"is_active",headerName:"Is active",flex:1},{field:"last_login",headerName:"Last login",flex:1},{field:"is_superuser",headerName:"Is superuser",flex:1},{field:"",renderCell:function(){return Object(w.jsx)("strong",{children:Object(w.jsx)(l.a,{align:"left",color:"primary",size:"small",onClick:me,children:Object(w.jsx)(L.a,{})})})}}];return Object(w.jsxs)("div",{className:j.tableContainer,children:[Object(w.jsx)(T.a,{position:"static",children:Object(w.jsxs)(C.a,{children:[Object(w.jsx)(W.a,{edge:"start",className:j.menuButton,color:"inherit","aria-label":"menu"}),Object(w.jsx)(u.a,{variant:"h6",className:j.title,children:"Awesome Table!"}),Object(w.jsx)(l.a,{color:"inherit",onClick:function(){$(!0)},children:"+ Add user"}),Object(w.jsx)(l.a,{onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),D(!0)},color:"inherit",children:"Logout"})]})}),Object(w.jsxs)(I.a,{open:M,onClose:je,"aria-labelledby":"form-dialog-title",children:[Object(w.jsx)(_.a,{id:"form-dialog-title",children:"New user"}),Object(w.jsx)(q.a,{children:Object(w.jsxs)("form",{className:j.form,noValidate:!0,onSubmit:ne(je),children:[Object(w.jsxs)(R.a,{container:!0,spacing:2,children:[Object(w.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(m.a,{name:"firstname",variant:"outlined",fullWidth:!0,id:"firstname",label:"First Name",autoFocus:!0,inputRef:te,error:!!se.firstname,helperText:null===se||void 0===se||null===(e=se.firstname)||void 0===e?void 0:e.message})}),Object(w.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,id:"lastname",label:"Last Name",name:"lastname",inputRef:te,error:!!se.lastname,helperText:null===se||void 0===se||null===(a=se.lastname)||void 0===a?void 0:a.message})}),Object(w.jsx)(R.a,{item:!0,xs:12,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,id:"username",label:"Username",name:"username",inputRef:te,error:!!se.username,helperText:null===se||void 0===se||null===(t=se.username)||void 0===t?void 0:t.message})}),Object(w.jsx)(R.a,{item:!0,xs:12,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:te,error:!!se.password,helperText:null===se||void 0===se||null===(s=se.password)||void 0===s?void 0:s.message})})]}),Object(w.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:j.submit,children:"Add"}),Object(w.jsx)(l.a,{onClick:function(){$(!1)},color:"primary",variant:"contained",fullWidth:!0,className:j.cancel,children:"Cancel"})]})})]}),Object(w.jsx)(y.a,{rows:x,columns:pe,pageSize:25,onSelectionModelChange:function(e){ee(e.selectionModel[0])}}),Object(w.jsxs)(I.a,{open:H,onClose:ue,"aria-labelledby":"form-dialog-title",children:[Object(w.jsxs)(_.a,{id:"form-dialog-title",children:["Edit user with ID ",Y]}),Object(w.jsx)(q.a,{children:Object(w.jsxs)("form",{className:j.form,noValidate:!0,onSubmit:oe((function(e,a){var t={headers:{Authorization:"Token "+localStorage.getItem("token")}};a.preventDefault(),E(!0),g.a.patch(ce+"/api/v1/users/"+"".concat(Y,"/"),{username:e.username,first_name:e.firstname,last_name:e.lastname,password:e.password,is_active:P},t).then((function(e){A()({icon:"success",title:"The user is updated!"}),de()})).then((function(){K(!1)})).catch((function(e){console.log(e.message)}))})),children:[Object(w.jsxs)(R.a,{container:!0,spacing:2,children:[Object(w.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(m.a,{name:"firstname",variant:"outlined",fullWidth:!0,id:"firstname",label:"First Name",autoFocus:!0,inputRef:ie,error:!!le.firstname,helperText:null===le||void 0===le||null===(r=le.firstname)||void 0===r?void 0:r.message})}),Object(w.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,id:"lastname",label:"Last Name",name:"lastname",inputRef:ie,error:!!le.lastname,helperText:null===le||void 0===le||null===(o=le.lastname)||void 0===o?void 0:o.message})}),Object(w.jsx)(R.a,{item:!0,xs:12,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,id:"username",label:"Username",name:"username",inputRef:ie,error:!!le.username,helperText:null===le||void 0===le||null===(c=le.username)||void 0===c?void 0:c.message})}),Object(w.jsx)(R.a,{item:!0,xs:12,children:Object(w.jsx)(m.a,{variant:"outlined",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:ie,error:!!le.password,helperText:null===le||void 0===le||null===(d=le.password)||void 0===d?void 0:d.message})})]}),Object(w.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:j.submit,children:"Done"}),Object(w.jsx)(l.a,{onClick:ue,color:"primary",variant:"contained",fullWidth:!0,className:j.cancel,children:"Cancel"})]})})]})]})},P=t(97);var E=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(P.a,{children:Object(w.jsxs)(O.d,{children:[Object(w.jsx)(O.b,{exact:!0,path:"/",component:S}),Object(w.jsx)(O.b,{path:"/users",component:U})]})})})};r.a.render(Object(w.jsx)(E,{}),document.getElementById("root"))}},[[340,1,2]]]);
//# sourceMappingURL=main.9a24bc52.chunk.js.map
(this.webpackJsonpwebim=this.webpackJsonpwebim||[]).push([[0],{281:function(e,t){},283:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(12),i=a.n(s),r=a(11),c=a(329),o=a(143),l=a.n(o),d=a(328),u=a(345),m=a(285),j=a(323),b=a(326),h=a(46),p=a(28),x=a(59),O=a(38),f=a.n(O),g=a(15),v=a(348),w=a(3),S=Object(j.a)((function(e){return{container:{maxWidth:"500px",boxShadow:"0px 0px 8px 0px rgba(34, 60, 80, 0.2)"},typography:{marginTop:"10px"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),marginBottom:"20px"},icon:{marginTop:"20px",backgroundColor:"green"},wrongCred:{display:"block",color:"red"}}})),k=p.a().shape({username:p.b().required("\u041f\u043e\u043b\u0435 \u041b\u043e\u0433\u0438\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),password:p.b().required("\u041f\u043e\u043b\u0435 \u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")}),C=function(){var e,t,a=S(),s=Object(h.b)({resolver:Object(x.a)(k),mode:"onBlur"}),i=s.register,o=s.handleSubmit,j=s.errors,p=Object(n.useState)(""),O=Object(r.a)(p,2),C=O[0],y=O[1],N=Object(n.useState)(""),T=Object(r.a)(N,2),I=T[0],W=T[1],_=Object(n.useState)(!1),D=Object(r.a)(_,2),L=D[0],q=D[1],R=Object(n.useState)(!1),A=Object(r.a)(R,2),z=A[0],F=A[1];return L||localStorage.getItem("token")?Object(w.jsx)(g.a,{to:"/users"}):Object(w.jsxs)(b.a,{className:a.container,component:"main",maxWidth:"xs",children:[Object(w.jsx)(d.a,{}),Object(w.jsxs)("div",{className:a.paper,children:[Object(w.jsx)(v.a,{className:a.icon,children:Object(w.jsx)(l.a,{})}),Object(w.jsx)(m.a,{className:a.typography,component:"h1",variant:"h5",children:"\u0412\u043e\u0439\u0442\u0438 \u0432 IT"}),Object(w.jsxs)("form",{className:a.form,noValidate:!0,onSubmit:o((function(e,t){t.preventDefault(),f.a.post("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{username:C,password:I}).then((function(e){localStorage.setItem("token",e.data.token),200===e.request.status&&q(!0)})).catch((function(e){console.log(e.message),F(!0)}))})),children:[Object(w.jsx)(u.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,inputRef:i,id:"username",label:"\u041b\u043e\u0433\u0438\u043d",name:"username",autoFocus:!0,onChange:function(e){y(e.target.value),console.log(C)},value:C,error:!!j.username,helperText:null===j||void 0===j||null===(e=j.username)||void 0===e?void 0:e.message,autoComplete:"username"}),Object(w.jsx)(u.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,inputRef:i,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){W(e.target.value)},value:I,error:!!j.password,helperText:null===j||void 0===j||null===(t=j.password)||void 0===t?void 0:t.message}),Object(w.jsx)(c.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:"\u0412\u0445\u043e\u0434"})]}),!0===z&&Object(w.jsx)("p",{className:a.wrongCred,children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},y=(a(281),a(73)),N=a(8),T=a(330),I=a(331),W=a(332),_=a(286),D=a(349),L=a(333),q=a(334),R=a(335),A=a(336),z=a(337),F=a(350),V=a(338),B=a(344),E=a(339),P=a(340),U=a(80),J=a.n(U),M=a(347),$=a(341),G=a(342),Z=a(343),H=a(144),K=a.n(H),Q=a(145),X=a.n(Q),Y=Object(j.a)((function(e){return{app:{minWidth:"600px",maxWidth:"1000px",margin:"0 auto",height:"800px",boxShadow:"0px 0px 8px 0px rgba(34, 60, 80, 0.2)"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cancel:{margin:e.spacing(3,0,2),marginTop:"0px"},iconEdit:{cursor:"pointer"},iconDelete:{color:"red",cursor:"pointer"},arrow:{position:"absolute",marginLeft:"100%"},inputMaterial:{width:"100%"},menuButton:{marginRight:"0"},title:{flexGrow:1,marginLeft:"-20px"},root:{padding:"2px 4px",display:"flex",alignItems:"center",width:200,marginRight:10},input:{marginLeft:e.spacing(1),flex:1}}})),ee=p.a().shape({username:p.b().required("Username is a required field").max(150).matches(/^[\w.@+-]+$/,"Username can contain numbers, letters or @/./+/-/_ only "),password:p.b().required("Password is a required field").max(128).matches(/^(?=.*[A-Z])(?=.*\d).{8,}$/,"Password must be at least 8 characters, including a number, an uppercase letter, and a lowercase letter"),firstname:p.b().required("Firstname is a required field").max(30),lastname:p.b().required("Lastname is a required field").max(150)}),te=function(){var e,t,a,s,i,o,l,d,j=Y(),b=Object(n.useState)([]),p=Object(r.a)(b,2),O=p[0],v=p[1],S=Object(n.useState)(!1),k=Object(r.a)(S,2),C=k[0],y=k[1],U=Object(n.useState)(!1),H=Object(r.a)(U,2),Q=H[0],te=H[1],ae=Object(n.useState)(!1),ne=Object(r.a)(ae,2),se=ne[0],ie=ne[1],re=Object(n.useState)(!1),ce=Object(r.a)(re,2),oe=ce[0],le=ce[1],de=Object(n.useState)(!0),ue=Object(r.a)(de,2),me=ue[0],je=ue[1],be=Object(n.useState)(""),he=Object(r.a)(be,2),pe=he[0],xe=he[1],Oe=Object(n.useState)([]),fe=Object(r.a)(Oe,2),ge=fe[0],ve=fe[1],we=Object(n.useState)(""),Se=Object(r.a)(we,2),ke=Se[0],Ce=Se[1],ye=Object(n.useState)(!1),Ne=Object(r.a)(ye,2),Te=Ne[0],Ie=Ne[1],We=Object(n.useState)(""),_e=Object(r.a)(We,2),De=_e[0],Le=_e[1],qe=Object(h.b)({resolver:Object(x.a)(ee)}),Re=qe.register,Ae=qe.handleSubmit,ze=qe.errors,Fe=Object(h.b)({resolver:Object(x.a)(ee)}),Ve=Fe.register,Be=Fe.errors,Ee=Fe.handleSubmit,Pe="https://emphasoft-test-assignment.herokuapp.com";Object(n.useEffect)((function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};f.a.get(Pe+"/api/v1/users/",e).then((function(e){v(e.data)}))}),[]);var Ue=function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};f.a.get(Pe+"/api/v1/users/",e).then((function(e){v(e.data)}))},Je=function(){return me?Object(w.jsx)(K.a,{className:j.arrow}):Object(w.jsx)(X.a,{className:j.arrow})},Me=function(e){!function(e){var t,a=Object(N.a)(O);me&&(t=a.sort((function(t,a){return t[e].toString().toLowerCase()>a[e].toString().toLowerCase()?1:-1}))),t=a.reverse((function(t,a){return t[e].toString().toLowerCase()>a[e].toString().toLowerCase()?1:-1})),v(t),je(!me)}(e),Le(e)},$e=function(){y(!1)},Ge=function(){te(!0)},Ze=function(){te(!1)},He=function(){Ie(!0)};return oe?Object(w.jsx)(g.a,{to:"/"}):Object(w.jsxs)("div",{className:j.app,children:[Object(w.jsx)(T.a,{position:"static",children:Object(w.jsxs)(I.a,{children:[Object(w.jsx)(W.a,{edge:"start",className:j.menuButton,color:"inherit","aria-label":"menu"}),Object(w.jsx)(m.a,{variant:"h6",className:j.title,children:"Awesome Table!"}),Object(w.jsx)(_.a,{component:"form",className:j.root,children:Object(w.jsx)(D.a,{className:j.input,placeholder:"Type username",inputProps:{"aria-label":"search here"},onChange:function(e){xe(e.target.value)}})}),Object(w.jsx)(c.a,{color:"inherit",onClick:function(){y(!0)},children:"+ Add user"}),Object(w.jsx)(c.a,{color:"inherit",onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),le(!0)},children:"Logout"})]})}),Object(w.jsx)(L.a,{children:Object(w.jsxs)(q.a,{children:[Object(w.jsx)(R.a,{children:Object(w.jsxs)(A.a,{selected:!0,children:[Object(w.jsx)(z.a,{onClick:function(){Me("id")},children:Object(w.jsxs)(F.a,{hideSortIcon:!0,children:["ID","id"===De?Object(w.jsx)(Je,{}):null]})}),Object(w.jsx)(z.a,{onClick:function(){Me("username")},children:Object(w.jsxs)(F.a,{hideSortIcon:!0,children:["Username","username"===De?Object(w.jsx)(Je,{}):null]})}),Object(w.jsx)(z.a,{onClick:function(){Me("first_name")},children:Object(w.jsxs)(F.a,{hideSortIcon:!0,children:["Firstname","first_name"===De?Object(w.jsx)(Je,{}):null]})}),Object(w.jsx)(z.a,{onClick:function(){Me("last_name")},children:Object(w.jsxs)(F.a,{hideSortIcon:!0,children:["Lastname","last_name"===De?Object(w.jsx)(Je,{}):null]})}),Object(w.jsx)(z.a,{onClick:function(){Me("is_active")},children:Object(w.jsxs)(F.a,{hideSortIcon:!0,children:["Is active","is_active"===De?Object(w.jsx)(Je,{}):null]})}),Object(w.jsx)(z.a,{onClick:function(){Me("is_superuser")},children:Object(w.jsxs)(F.a,{hideSortIcon:!0,children:["Is superuser","is_superuser"===De?Object(w.jsx)(Je,{}):null]})}),Object(w.jsx)(z.a,{children:"Actions"})]})}),Object(w.jsx)(V.a,{children:O.filter((function(e){return""===pe||e.username.toLowerCase().includes(pe.toLowerCase())?e:void 0})).map((function(e){return Object(w.jsxs)(A.a,{onClick:function(){ve(e.id),Ce(e)},children:[Object(w.jsx)(z.a,{children:e.id}),Object(w.jsx)(z.a,{children:e.username}),Object(w.jsx)(z.a,{children:e.first_name}),Object(w.jsx)(z.a,{children:e.last_name}),Object(w.jsx)(z.a,{children:e.is_active+""}),Object(w.jsx)(z.a,{children:e.is_superuser+""}),Object(w.jsxs)(z.a,{children:[Object(w.jsx)(c.a,{style:{maxWidth:"30px",minWidth:"30px"},size:"small",children:Object(w.jsx)(E.a,{color:"primary",onClick:Ge,className:j.iconEdit})}),Object(w.jsx)(c.a,{style:{maxWidth:"30px",minWidth:"30px"},size:"small",children:Object(w.jsx)(P.a,{onClick:He,className:j.iconDelete})})]})]},e.id)}))})]})}),Object(w.jsxs)(M.a,{open:C,onClose:$e,"aria-labelledby":"form-dialog-title",children:[Object(w.jsx)($.a,{id:"form-dialog-title",children:"New user"}),Object(w.jsx)(G.a,{children:Object(w.jsxs)("form",{className:j.form,noValidate:!0,onSubmit:Ae((function(e,t){var a={headers:{Authorization:"Token "+localStorage.getItem("token")}};t.preventDefault(),ie(!0),f.a.post(Pe+"/api/v1/users/",{username:e.username,password:e.password,first_name:e.firstname,last_name:e.lastname,is_active:se},a).then((function(e){J()({icon:"success",title:"The user is created!"}),Ue()})).then((function(){y(!1)})).catch((function(e){console.log(e.message)}))})),children:[Object(w.jsxs)(Z.a,{container:!0,spacing:2,children:[Object(w.jsx)(Z.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(u.a,{name:"firstname",variant:"outlined",fullWidth:!0,id:"firstname",label:"First Name",autoFocus:!0,inputRef:Re,error:!!ze.firstname,helperText:null===ze||void 0===ze||null===(e=ze.firstname)||void 0===e?void 0:e.message})}),Object(w.jsx)(Z.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,id:"lastname",label:"Last Name",name:"lastname",inputRef:Re,error:!!ze.lastname,helperText:null===ze||void 0===ze||null===(t=ze.lastname)||void 0===t?void 0:t.message})}),Object(w.jsx)(Z.a,{item:!0,xs:12,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,id:"username",label:"Username",name:"username",inputRef:Re,error:!!ze.username,helperText:null===ze||void 0===ze||null===(a=ze.username)||void 0===a?void 0:a.message})}),Object(w.jsx)(Z.a,{item:!0,xs:12,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:Re,error:!!ze.password,helperText:null===ze||void 0===ze||null===(s=ze.password)||void 0===s?void 0:s.message})})]}),Object(w.jsx)(c.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:j.submit,children:"Add"}),Object(w.jsx)(c.a,{onClick:$e,color:"primary",variant:"contained",fullWidth:!0,className:j.cancel,children:"Cancel"})]})})]}),Object(w.jsxs)(M.a,{open:Q,onClose:Ze,"aria-labelledby":"form-dialog-title",children:[Object(w.jsxs)($.a,{id:"form-dialog-title",children:["Edit user with ID ",ge]}),Object(w.jsx)(G.a,{children:Object(w.jsxs)("form",{className:j.form,noValidate:!0,onSubmit:Ee((function(e,t){var a={headers:{Authorization:"Token "+localStorage.getItem("token")}};t.preventDefault(),ie(!0),f.a.patch(Pe+"/api/v1/users/"+"".concat(ge,"/"),{username:e.username,first_name:e.firstname,last_name:e.lastname,password:e.password,is_active:se},a).then((function(e){J()({icon:"success",title:"The user is updated!"}),Le(""),Ue()})).then((function(){te(!1)})).catch((function(e){console.log(e.message)}))})),children:[Object(w.jsxs)(Z.a,{container:!0,spacing:2,children:[Object(w.jsx)(Z.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(u.a,{defaultValue:ke.first_name,name:"firstname",variant:"outlined",fullWidth:!0,id:"firstname",label:"First Name",autoFocus:!0,inputRef:Ve,error:!!Be.firstname,helperText:null===Be||void 0===Be||null===(i=Be.firstname)||void 0===i?void 0:i.message})}),Object(w.jsx)(Z.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,defaultValue:ke.last_name,id:"lastname",label:"Last Name",name:"lastname",inputRef:Ve,error:!!Be.lastname,helperText:null===Be||void 0===Be||null===(o=Be.lastname)||void 0===o?void 0:o.message})}),Object(w.jsx)(Z.a,{item:!0,xs:12,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,defaultValue:ke.username,id:"username",label:"Username",name:"username",inputRef:Ve,error:!!Be.username,helperText:null===Be||void 0===Be||null===(l=Be.username)||void 0===l?void 0:l.message})}),Object(w.jsx)(Z.a,{item:!0,xs:12,children:Object(w.jsx)(u.a,{variant:"outlined",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:Ve,error:!!Be.password,helperText:null===Be||void 0===Be||null===(d=Be.password)||void 0===d?void 0:d.message})})]}),Object(w.jsx)(c.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:j.submit,children:"Done"}),Object(w.jsx)(c.a,{onClick:Ze,color:"primary",variant:"contained",fullWidth:!0,className:j.cancel,children:"Cancel"})]})})]}),Object(w.jsxs)(M.a,{open:Te,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(w.jsxs)($.a,{id:"alert-dialog-slide-title",children:["Delete ID ",ge,"?"]}),Object(w.jsxs)(B.a,{children:[Object(w.jsx)(c.a,{onClick:function(){Ie(!1)},color:"primary",variant:"contained",children:"Cancel"}),Object(w.jsx)(c.a,{onClick:function(e){var t={headers:{Authorization:"Token "+localStorage.getItem("token")}};e.preventDefault(),f.a.delete(Pe+"/api/v1/users/"+"".concat(ge,"/"),t).then((function(e){Ie(!1),J()({icon:"success",title:"The user is deleted!"}),Le(""),Ue()})).catch((function(e){console.log(e.message)}))},color:"primary",variant:"contained",children:"Delete"})]})]})]})};var ae=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(y.a,{children:Object(w.jsxs)(g.d,{children:[Object(w.jsx)(g.b,{exact:!0,path:"/",component:C}),Object(w.jsx)(g.b,{path:"/users",component:te})]})})})};i.a.render(Object(w.jsx)(ae,{}),document.getElementById("root"))}},[[283,1,2]]]);
//# sourceMappingURL=main.9e438ed5.chunk.js.map